// This file has been autogenerated from a class added in the UI designer.

using System;

using MonoTouch.Foundation;
using MonoTouch.UIKit;

namespace ClickNDone.iOS
{
	public partial class ServiceController : UIViewController
	{
		ActionSheetDatePicker actionSheetDatePicker;

		public ServiceController (IntPtr handle) : base (handle)
		{

		}

		public override void ViewDidLoad ()
		{
			base.ViewDidLoad ();

			UITapGestureRecognizer labelTap = new UITapGestureRecognizer(() => {
				actionSheetDatePicker.Show ();
			});
			UITapGestureRecognizer labelDayTap = new UITapGestureRecognizer(() => {
				actionSheetDatePicker.Show ();
			});
			UITapGestureRecognizer labelYearTap = new UITapGestureRecognizer(() => {
				actionSheetDatePicker.Show ();
			});
			lblMonth.UserInteractionEnabled = true;
			lblMonth.AddGestureRecognizer(labelTap);

			lblDay.UserInteractionEnabled = true;
			lblDay.AddGestureRecognizer(labelDayTap);

			lblYear.UserInteractionEnabled = true;
			lblYear.AddGestureRecognizer(labelYearTap);

			actionSheetDatePicker = new ActionSheetDatePicker (this.View);
			actionSheetDatePicker.Title = "Choose Date:";
			actionSheetDatePicker.DatePicker.Mode = UIDatePickerMode.Date;
			actionSheetDatePicker.DatePicker.MinimumDate = DateTime.Today.AddDays (0);
			actionSheetDatePicker.DatePicker.MaximumDate = DateTime.Today.AddDays (120);			

			actionSheetDatePicker.DatePicker.ValueChanged += (s, e) => {
				NSDate selectedDate = (s as UIDatePicker).Date;
				var dateTime = DateTime.SpecifyKind(selectedDate, DateTimeKind.Unspecified);
				lblMonth.Text = dateTime.ToString("MMMM");
				lblDay.Text = dateTime.Day.ToString();
				lblYear.Text = dateTime.Year.ToString();
			};

			actionSheetDatePicker.DoneButton.TouchDown += (s, e) => {
				var dateTime = DateTime.SpecifyKind(actionSheetDatePicker.DatePicker.Date, DateTimeKind.Unspecified);
				lblMonth.Text = dateTime.ToString("MMMM");
				lblDay.Text = dateTime.Day.ToString();
				lblYear.Text = dateTime.Year.ToString();
			};

		}
	}
}
